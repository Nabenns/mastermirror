@echo off
color 0a
title Discord Auto-Forwarder Setup Launcher

echo ======================================================
echo Discord Auto-Forwarder Setup Launcher
echo ======================================================
echo.
echo This will run the setup process and keep the window open
echo so you can see all the installation steps.
echo.
echo Press any key to begin setup...
pause > nul

cmd /k "color 0a & echo ====================================================== & echo Installing npm dependencies... & npm install & echo. & echo ====================================================== & echo Installing PM2 globally... Please wait, this may take a moment... & npm install -g pm2 & echo. & echo ====================================================== & echo Setting up PM2 for Discord Auto-Forwarder... & pm2 delete discord-autoforwarder 2>nul & pm2 start index.js --name discord-autoforwarder & echo PM2 configured to run Discord Auto-Forwarder & pm2 save & echo PM2 configuration saved. Application will restart automatically on system boot. & echo. & echo ====================================================== & echo Setting up ngrok... & echo. & if exist ngrok.exe (echo Ngrok is already installed.) else (echo Downloading ngrok... & if not exist downloads mkdir downloads & echo Determining system architecture... & reg Query 'HKLM\Hardware\Description\System\CentralProcessor\0' | find /i 'x86' > NUL && set ARCH=32 || set ARCH=64 & if !ARCH! == 32 (echo Downloading 32-bit version... & powershell -Command 'Invoke-WebRequest -Uri \"https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-windows-386.zip\" -OutFile \"downloads\ngrok.zip\"') else (echo Downloading 64-bit version... & powershell -Command 'Invoke-WebRequest -Uri \"https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-windows-amd64.zip\" -OutFile \"downloads\ngrok.zip\"') & echo Extracting ngrok... & powershell -Command 'Expand-Archive -Force -Path \"downloads\ngrok.zip\" -DestinationPath \".\"' & echo Ngrok downloaded and extracted.) & echo. & echo Would you like to setup ngrok authentication? (Y/N) & choice /c YN /m \"Setup ngrok auth: \" & if !errorlevel! equ 1 (echo. & echo Please enter your ngrok authtoken: & set /p NGROK_AUTH= & if not \"!NGROK_AUTH!\" == \"\" (ngrok config add-authtoken !NGROK_AUTH! & echo Ngrok authentication configured successfully.) else (echo No authtoken provided. Skipping authentication.)) & echo. & echo ====================================================== & echo Creating data directory... & if not exist data mkdir data & echo Data directory ready. & echo. & echo ====================================================== & echo Creating .env file... & if exist .env (echo .env file already exists. Skipping creation.) else (echo PORT=3000 > .env & echo DISCORD_TOKEN= >> .env & echo LOG_LEVEL=INFO >> .env & echo Created default .env file.) & echo. & echo ====================================================== & echo Setup complete! The Discord Auto-Forwarder is now: & echo - Installed with all dependencies & echo - Configured to run with PM2 & echo - Set to automatically start on system boot & echo - Ngrok is installed for remote access & echo. & echo You can manage the application using these commands: & echo - pm2 status (view status) & echo - pm2 logs discord-autoforwarder (view logs) & echo - pm2 restart discord-autoforwarder (restart) & echo - pm2 stop discord-autoforwarder (stop) & echo. & echo For remote access, use: & echo - ngrok http 3000 & echo ====================================================== & echo. & echo The window will stay open. You can close it manually when ready." 